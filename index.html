<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AR Crimmus Cats</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.js"></script>

    <style>
        body { margin: 0; overflow: hidden; }

        .arjs-loader {
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0; left: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .arjs-loader div {
            color: white;
            font-size: 1.3em;
            font-family: system-ui, sans-serif;
        }

        #message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,182,193,0.9);
            padding: 14px 20px;
            color: #fff;
            font-family: system-ui, sans-serif;
            border-radius: 14px;
            text-align: center;
            max-width: 85%;
            font-size: 15px;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        #message.visible { opacity: 1; }
    </style>
</head>
<body>

<div class="arjs-loader"><div>Loading AR scene...</div></div>
<div id="message"></div>

<a-scene
        embedded
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true; antialias: true;"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; maxDetectionRate: 60;">

    <!-- Green Cat Marker -->
    <a-nft
            id="greenCat"
            type="nft"
            url="./markers/cat-green"
            smooth="true"
            smoothCount="20"
            smoothTolerance="0.01"
            smoothThreshold="10">

        <a-entity id="greenHearts">
            <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¾ -->
            <a-sphere
                    position="50 120 0"
                    radius="25"
                    color="#ff69b4"
                    animation="property: position; to: 50 150 0; loop: true; dur: 2000; dir: alternate; easing: easeInOutQuad">
            </a-sphere>

            <!-- Ð¡ÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ Ð¿Ð¾ ÐºÑ€ÑƒÐ³Ñƒ - Ð¾Ñ€Ð±Ð¸Ñ‚Ð° -->
            <a-entity
                    position="50 130 0"
                    rotation="-90 0 0"
                    animation="property: rotation; to: -90 360 0; loop: true; dur: 8000; easing: linear">

                <a-sphere position="40 0 0" radius="15" color="#ff1493"
                          animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1000; dir: alternate">
                </a-sphere>

                <a-sphere position="-40 0 0" radius="15" color="#ff69b4"
                          animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1200; dir: alternate">
                </a-sphere>

                <a-sphere position="0 0 40" radius="15" color="#ff1493"
                          animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1100; dir: alternate">
                </a-sphere>

                <a-sphere position="0 0 -40" radius="15" color="#ff69b4"
                          animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1300; dir: alternate">
                </a-sphere>
            </a-entity>

            <!-- ÐœÐ°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ð±Ð»ÐµÑÑ‚ÑÑ‰Ð¸Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ -->
            <a-sphere position="80 150 30" radius="10" color="#ffb6c1"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 2000">
            </a-sphere>

            <a-sphere position="20 150 -30" radius="10" color="#ffb6c1"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 2500">
            </a-sphere>

            <a-sphere position="-20 160 20" radius="8" color="#ffc0cb"
                      animation="property: position; to: -20 180 20; loop: true; dur: 1800; dir: alternate">
            </a-sphere>
        </a-entity>

        <a-text
                value="Green Crimmus!"
                position="50 180 0"
                align="center"
                color="#00ff00"
                scale="40 40 40">
        </a-text>
    </a-nft>

    <!-- Purple Cat Marker -->
    <a-nft
            id="purpleCat"
            type="nft"
            url="./markers/cat-purple"
            smooth="true"
            smoothCount="20"
            smoothTolerance="0.01"
            smoothThreshold="10"
            visible="false">

        <a-entity id="purpleHearts">
            <!-- Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¾ -->
            <a-sphere
                    position="50 130 0"
                    radius="30"
                    color="#da70d6"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 3000">
            </a-sphere>

            <!-- ÐžÑ€Ð±Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ (ÐºÐ°Ðº Ñƒ Nyan Cat) -->
            <a-entity
                    position="50 140 0"
                    rotation="-90 0 0"
                    animation="property: rotation; to: -90 360 0; loop: true; dur: 5000; easing: linear">

                <a-sphere radius="18" color="#ff00ff" position="50 0 0"></a-sphere>
                <a-sphere radius="16" color="#da70d6" position="-50 0 0"></a-sphere>
                <a-sphere radius="14" color="#ff00ff" position="0 0 50"></a-sphere>
                <a-sphere radius="16" color="#da70d6" position="0 0 -50"></a-sphere>
                <a-sphere radius="12" color="#ffb6c1" position="35 0 35"></a-sphere>
            </a-entity>

            <!-- ÐŸÐ»Ð°Ð²Ð°ÑŽÑ‰Ð¸Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ ÑÐ²ÐµÑ€Ñ…Ñƒ -->
            <a-sphere position="80 170 20" radius="12" color="#ffb6c1"
                      animation="property: position; to: 80 190 20; loop: true; dur: 2000; dir: alternate">
            </a-sphere>

            <a-sphere position="20 170 -20" radius="12" color="#ffb6c1"
                      animation="property: position; to: 20 190 -20; loop: true; dur: 2200; dir: alternate">
            </a-sphere>

            <!-- ÐŸÑƒÐ»ÑŒÑÐ¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ Ð·Ð²Ñ‘Ð·Ð´Ð¾Ñ‡ÐºÐ¸ -->
            <a-sphere radius="15" color="#ffd6ff" position="90 160 30"
                      animation="property: scale; dir: alternate; from: 0.5 0.5 0.5; to: 1.5 1.5 1.5; loop: true; dur: 600">
            </a-sphere>

            <a-sphere radius="13" color="#e6ccff" position="10 160 40"
                      animation="property: scale; dir: alternate; from: 0.5 0.5 0.5; to: 1.6 1.6 1.6; loop: true; dur: 700">
            </a-sphere>
        </a-entity>

        <a-text
                value="Purple Crimmus!"
                position="50 200 0"
                align="center"
                color="#ff00ff"
                scale="40 40 40">
        </a-text>
    </a-nft>

    <a-entity camera></a-entity>
</a-scene>

<script>
    const loader = document.querySelector('.arjs-loader');
    const message = document.getElementById('message');

    let greenScanned = false;

    const greenMarker = document.getElementById('greenCat');
    const purpleMarker = document.getElementById('purpleCat');

    greenMarker.addEventListener('markerFound', () => {
        console.log('Green cat marker found!');
        loader.style.display = 'none';
        message.textContent = 'ðŸ’š Green Cat found! Now scan Purple Cat! ðŸ’œ';
        message.classList.add('visible');

        greenScanned = true;
        purpleMarker.setAttribute('visible', 'true');
    });

    greenMarker.addEventListener('markerLost', () => {
        console.log('Green cat marker lost');
    });

    purpleMarker.addEventListener('markerFound', () => {
        if (greenScanned) {
            console.log('Purple cat marker found!');
            message.textContent = 'ðŸ’œ Purple Cat found! Both cats complete! ðŸŽ‰';

            setTimeout(() => {
                message.classList.remove('visible');
            }, 3000);
        }
    });

    purpleMarker.addEventListener('markerLost', () => {
        console.log('Purple cat marker lost');
    });
</script>

</body>
</html>