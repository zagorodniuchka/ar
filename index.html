<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AR Cats</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.js"></script>

    <style>
        body { margin: 0; overflow: hidden; }

        .arjs-loader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            font-size: 1.5em;
            font-family: Arial, sans-serif;
        }

        #message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,182,193,0.9);
            padding: 15px 25px;
            color: #fff;
            font-family: Arial, sans-serif;
            border-radius: 20px;
            text-align: center;
            font-size: 16px;
            z-index: 9999;
            display: none;
        }
    </style>
</head>
<body>

<div class="arjs-loader">Loading AR scene...</div>
<div id="message">ðŸ’š Scan Green Cat! ðŸ’š</div>

<a-scene
        embedded
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true; antialias: true;"
        arjs="sourceType: webcam; debugUIEnabled: false;">

    <!-- Green Cat Marker -->
    <a-nft
            id="greenCat"
            type="nft"
            url="./markers/cat-green"
            smooth="true"
            smoothCount="10"
            smoothTolerance="0.01"
            smoothThreshold="5">

        <!-- Ð¡ÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ Ð²Ð¾ÐºÑ€ÑƒÐ³ Ð·ÐµÐ»Ñ‘Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ñ‚Ð° -->
        <a-entity id="greenHearts">
            <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¾ -->
            <a-sphere
                    position="0 0.5 0"
                    radius="0.25"
                    color="#ff69b4"
                    animation="property: position; to: 0 0.8 0; loop: true; dur: 1500; dir: alternate; easing: easeInOutQuad">
            </a-sphere>

            <!-- Ð¡ÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ Ð¿Ð¾ ÐºÑ€ÑƒÐ³Ñƒ -->
            <a-sphere position="0.5 0.5 0" radius="0.15" color="#ff1493"
                      animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1000; dir: alternate">
            </a-sphere>

            <a-sphere position="-0.5 0.5 0" radius="0.15" color="#ff69b4"
                      animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1200; dir: alternate">
            </a-sphere>

            <a-sphere position="0 0.5 0.5" radius="0.15" color="#ff1493"
                      animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1100; dir: alternate">
            </a-sphere>

            <a-sphere position="0 0.5 -0.5" radius="0.15" color="#ff69b4"
                      animation="property: scale; from: 0.8 0.8 0.8; to: 1.2 1.2 1.2; loop: true; dur: 1300; dir: alternate">
            </a-sphere>

            <!-- ÐœÐ°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ð±Ð»ÐµÑÑ‚ÑÑ‰Ð¸Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ -->
            <a-sphere position="0.3 0.8 0.3" radius="0.1" color="#ffb6c1"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 2000">
            </a-sphere>

            <a-sphere position="-0.3 0.8 -0.3" radius="0.1" color="#ffb6c1"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 2500">
            </a-sphere>
        </a-entity>

        <a-text
                value="Green Crimmus!"
                position="0 1.3 0"
                align="center"
                color="#00ff00"
                scale="1 1 1">
        </a-text>
    </a-nft>

    <!-- Purple Cat Marker (Ð¿Ð¾ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð·ÐµÐ»Ñ‘Ð½Ð¾Ð³Ð¾) -->
    <a-nft
            id="purpleCat"
            type="nft"
            url="./markers/cat-purple"
            smooth="true"
            smoothCount="10"
            smoothTolerance="0.01"
            smoothThreshold="5"
            visible="false">

        <!-- Ð¡ÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ Ð²Ð¾ÐºÑ€ÑƒÐ³ Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ¾Ñ‚Ð° -->
        <a-entity id="purpleHearts">
            <!-- Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¾ -->
            <a-sphere
                    position="0 0.6 0"
                    radius="0.3"
                    color="#da70d6"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 3000">
            </a-sphere>

            <!-- ÐžÑ€Ð±Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ -->
            <a-entity
                    rotation="0 0 0"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear">

                <a-sphere position="0.6 0.6 0" radius="0.18" color="#ff00ff"></a-sphere>
                <a-sphere position="-0.6 0.6 0" radius="0.18" color="#ff00ff"></a-sphere>
                <a-sphere position="0 0.6 0.6" radius="0.18" color="#da70d6"></a-sphere>
                <a-sphere position="0 0.6 -0.6" radius="0.18" color="#da70d6"></a-sphere>
            </a-entity>

            <!-- ÐŸÐ»Ð°Ð²Ð°ÑŽÑ‰Ð¸Ðµ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ ÑÐµÑ€Ð´ÐµÑ‡ÐºÐ¸ -->
            <a-sphere position="0.4 1 0.2" radius="0.12" color="#ffb6c1"
                      animation="property: position; to: 0.4 1.4 0.2; loop: true; dur: 2000; dir: alternate">
            </a-sphere>

            <a-sphere position="-0.4 1 -0.2" radius="0.12" color="#ffb6c1"
                      animation="property: position; to: -0.4 1.4 -0.2; loop: true; dur: 2200; dir: alternate">
            </a-sphere>
        </a-entity>

        <a-text
                value="Purple Crimmus!"
                position="0 1.6 0"
                align="center"
                color="#ff00ff"
                scale="1 1 1">
        </a-text>
    </a-nft>

    <a-entity camera></a-entity>
</a-scene>

<script>
    const loader = document.querySelector('.arjs-loader');
    const message = document.getElementById('message');

    let greenScanned = false;

    const greenMarker = document.getElementById('greenCat');
    const purpleMarker = document.getElementById('purpleCat');

    // Green cat found
    greenMarker.addEventListener('markerFound', () => {
        console.log('Green cat marker found!');
        loader.style.display = 'none';
        message.style.display = 'block';
        message.innerHTML = 'ðŸ’š Green Cat found!<br>Now scan Purple Cat! ðŸ’œ';

        greenScanned = true;

        // Enable purple marker after 1 second
        setTimeout(() => {
            purpleMarker.setAttribute('visible', 'true');
        }, 1000);
    });

    greenMarker.addEventListener('markerLost', () => {
        console.log('Green cat marker lost');
    });

    // Purple cat found
    purpleMarker.addEventListener('markerFound', () => {
        if (greenScanned) {
            console.log('Purple cat marker found!');
            message.innerHTML = 'ðŸ’œ Purple Cat found!<br>Both cats complete! ðŸŽ‰';

            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }
    });

    purpleMarker.addEventListener('markerLost', () => {
        console.log('Purple cat marker lost');
    });
</script>

</body>
</html>